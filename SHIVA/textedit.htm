<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="shivalib-min.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
	<title>SHIVA Text Editor</title>
	<meta charset="utf-8">
	<link REL="SHORTCUT ICON" HREF="UVALogo.ico">
	<script src="ckeditor/ckeditor.js"></script>
	<style type="text/css">
		body { font-family:Verdana,Geneva,sans-serif; font-size:small }
	</style>
</head>
<body>

<script>
	if (window.parent.name != "topWindow")
		$("body").append("<p><img src='http://www.viseyes.org/shiva/SHIVAlogo.gif' width='350' height='65' alt='SHIVA Logo'></p>");
		$("body").css("padding","16px");
</script>

	<textarea class="ckeditor" id="editor1" name="editor1" rows="40" cols="20"></textarea>
	<p>&nbsp;</p>
	<p><strong>How to use SHIVA TextEditor</strong></p>
	<ol>
		<li><span style="line-height:1.6em">Use a web-based HTML editor to format your text, much like you do in Microsoft Word&nbsp;</span></li>
		<li><span style="line-height:1.6em">You can add content either by typing or via cut and paste. </span></li>
		<li><span style="line-height:1.6em">Resize the text editor to best represent the size of the text you are creating. </span></li>
		<li><span style="line-height:1.6em">Use the formatting tools provided instead of having to add the codes by hand.</span></li>
		<li><span style="line-height:1.6em">When you&rsquo;re done, click on the </span><em style="line-height:1.6em">Source </em><span style="line-height:1.6em">button and copy the html formatted text to your project. </span></li>
		<li><span style="line-height:1.6em">To re-edit already html-formatted text, click on the </span><em style="line-height:1.6em">Source </em><span style="line-height:1.6em">button before pasting the new text in.</span></li>
	</ol>
	<div id='saveAsDiv'></div>
	<p>&nbsp;</p><p>&nbsp;</p>
	<div id="outputDiv" style="width:460px"></div>
	<input type="hidden" id="propInput0">	
	<input type="hidden" id="propInput1">	
	<input type="hidden" id="propInput2">	
	<input type="hidden" id="propInput3">	

<script>


//////// INIT  /////////////

	$(document).ready(function() {
		shivaLib=new SHIVA_Show("containerDiv",[{shivaGroup:"HTML"}]);
		shivaLib.drupalMan=(""+window.location).match(/pr=d/);
		if (!shivaLib.drupalMan) {
			var str="&nbsp;&nbsp;Share as: <select id='formatter' onChange='SaveData(this.value)'>";
			str+="<option>Choose format</option>";
			str+="<option>eStore</option>";
			str+="<option>JSON</option>";
			str+="</select>"; 
			$("#saveAsDiv").html(str);
			}

	function SaveData(mode)
	{
		var str=CKEDITOR.instances.editor1.getData().replace(/[\n|\r]/g,"").replace(/"/g,"&quot;");
		$("#propInput0").val(str);
		$("#propInput1").val($("#cke_1_contents").height());
		$("#propInput2").val($("#cke_1_contents").width());
		$("#propInput3").val($("#cke_1_contents").width());
		var o={html:0,height:0,width:0,oWid:0};
		return shivaLib.SaveData(mode,"HTML","",o);
	}	

	function ReEdit(jsonData)
	{
		jsonData.html=jsonData.html.replace(/&quot;/g,"\"");
		CKEDITOR.instances.editor1.setData(jsonData.html);
 	}	



	
</script>	
</body>
</html>

